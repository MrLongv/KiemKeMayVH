<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>THEO D√ïI NƒÇNG SU·∫§T GI·ªú XN1</title>
<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#f3f4f6;
}
h2{
  text-align:center;
  margin:12px 0;
}
table{
  width:100%;
  border-collapse:collapse;
  background:#fff;
}
th,td{
  border:1px solid #9ca3af;
  padding:4px;
  font-size:13px;
  text-align:center;
  white-space:nowrap;
}
th{
  background:#e5e7eb;
}
input{
  width:100%;
  border:none;
  outline:none;
  background:transparent;
  text-align:center;
}
tfoot td{
  background:#d1d5db;
  font-weight:bold;
}
.total-strong{
  background:#9ca3af !important;
  font-size:14px;
}
</style>
</head>

<body>

<h2>üìä THEO D√ïI NƒÇNG SU·∫§T GI·ªú ‚Äì XN1</h2>

<table id="tbl">

<thead>
<tr>
  <th rowspan="2">T·ªî</th>
  <th rowspan="2">M√É H√ÄNG</th>
  <th rowspan="2">SL</th>
  <th rowspan="2">ƒê·ªäNH M·ª®C<br>NG√ÄY</th>
  <th rowspan="2">ƒê·ªäNH M·ª®C<br>GI·ªú</th>
  <th rowspan="2">USD / QT</th>
  <th colspan="9">NƒÇNG SU·∫§T THEO GI·ªú</th>
  <th rowspan="2">C·ªòNG SP</th>
  <th rowspan="2">USD / TH</th>
  <th rowspan="2">HI·ªÜU SU·∫§T</th>
  <th colspan="2">LAO ƒê·ªòNG</th>
  <th rowspan="2">ƒêG</th>
  <th rowspan="2">TG / QT</th>
  <th rowspan="2">USD / NG√ÄY 100%</th>
  <th rowspan="2">CHUY·ªÇN ƒê·ªîI</th>
</tr>
<tr>
  <th>7-8</th>
  <th>8-9</th>
  <th>9-10</th>
  <th>10-11</th>
  <th>12-13</th>
  <th>13-14</th>
  <th>14-15</th>
  <th>15-16</th>
  <th>16-17</th>
  <th>TT</th>
  <th>SƒêC</th>
</tr>
</thead>

<tbody>

<!-- ===== T·ªî 1 ===== -->
<tr>
<td>1</td>
<td><input></td>
<td><input></td>
<td><input class="dm-ngay"></td>
<td>
  <input class="dm-gio" readonly style="background:#f3f4f6">
</td>

<td><input class="don-gia"></td>

<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>

<td class="tong-sp">0</td>
<td class="usd-th">0</td>
<td class="hs">0%</td>
<td><input></td>
<td><input></td>
<td><input></td>
<td><input></td>
<td class="usd100">0</td>
<td></td>
</tr>

<!-- ===== T·ªî 3 ===== -->
<tr>
<td>3</td>
<td><input></td>
<td><input></td>
<td><input class="dm-ngay"></td>
<td>
  <input class="dm-gio" readonly style="background:#f3f4f6">
</td>

<td><input class="don-gia"></td>
  
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>

<td class="tong-sp">0</td>
<td class="usd-th">0</td>
<td class="hs">0%</td>
<td><input></td>
<td><input></td>
<td><input></td>
<td><input></td>
<td class="usd100">0</td>
<td></td>
</tr>

<!-- ===== T·ªî 5 ===== -->
<tr>
<td>5</td>
<td><input></td>
<td><input></td>
<td><input class="dm-ngay"></td>
<td>
  <input class="dm-gio" readonly style="background:#f3f4f6">
</td>

<td><input class="don-gia"></td>

<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>

<td class="tong-sp">0</td>
<td class="usd-th">0</td>
<td class="hs">0%</td>
<td><input></td>
<td><input></td>
<td><input></td>
<td><input></td>
<td class="usd100">0</td>
<td></td>
</tr>

<!-- ===== T·ªî 7 ===== -->
<tr>
<td>7</td>
<td><input></td>
<td><input></td>
<td><input class="dm-ngay"></td>
<td>
  <input class="dm-gio" readonly style="background:#f3f4f6">
</td>

<td><input class="don-gia"></td>

<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>

<td class="tong-sp">0</td>
<td class="usd-th">0</td>
<td class="hs">0%</td>
<td><input></td>
<td><input></td>
<td><input></td>
<td><input></td>
<td class="usd100">0</td>
<td></td>
</tr>

<!-- ===== T·ªî 9 ===== -->
<tr>
<td>9</td>
<td><input></td>
<td><input></td>
<td><input class="dm-ngay"></td>
<td>
  <input class="dm-gio" readonly style="background:#f3f4f6">
</td>

<td><input class="don-gia"></td>

<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>
<td><input class="gio"></td>

<td class="tong-sp">0</td>
<td class="usd-th">0</td>
<td class="hs">0%</td>
<td><input></td>
<td><input></td>
<td><input></td>
<td><input></td>
<td class="usd100">0</td>
<td></td>
</tr>

</tbody>

<tfoot>
<tr>
<td colspan="6">T·ªîNG USD / QT THEO GI·ªú</td>
<td class="tong-usd-gio">0</td>
<td class="tong-usd-gio">0</td>
<td class="tong-usd-gio">0</td>
<td class="tong-usd-gio">0</td>
<td class="tong-usd-gio">0</td>
<td class="tong-usd-gio">0</td>
<td class="tong-usd-gio">0</td>
<td class="tong-usd-gio">0</td>
<td class="tong-usd-gio">0</td>
<td colspan="9"></td>
</tr>

<tr>
<td colspan="6">∆Ø·ªöC T√çNH USD TRONG NG√ÄY</td>
<td class="uoc-usd-gio">0</td>
<td class="uoc-usd-gio">0</td>
<td class="uoc-usd-gio">0</td>
<td class="uoc-usd-gio">0</td>
<td class="uoc-usd-gio">0</td>
<td class="uoc-usd-gio">0</td>
<td class="uoc-usd-gio">0</td>
<td class="uoc-usd-gio">0</td>
<td class="uoc-usd-gio">0</td>
<td colspan="9"></td>
</tr>

<tr class="total-strong">
<td colspan="23">T·ªîNG USD CU·ªêI NG√ÄY</td>
<td id="tong-usd-ngay">0</td>
</tr>
</tfoot>

</table>

<script>
function calc(){
  let tongNgay = 0;
  const tongUsdGio = Array(9).fill(0);

  document.querySelectorAll("tbody tr").forEach(r=>{
    // s·∫£n l∆∞·ª£ng t·ª´ng gi·ªù
    const gio = [...r.querySelectorAll(".gio")].map(i => +i.value || 0);

    // ƒë·ªãnh m·ª©c ng√†y
    const dmngay = +r.querySelector(".dm-ngay").value || 0;

    // ƒë∆°n gi√° (ƒêG / ƒêƒêG)
    const donGia = +r.querySelector(".don-gia").value || 0;

    /* ===== ƒêM GI·ªú = ƒêM NG√ÄY / 9 ===== */
    const dmGio = dmngay ? (dmngay / 9) : 0;
    const dmGioInput = r.querySelector(".dm-gio");
    if (dmGioInput) dmGioInput.value = dmGio.toFixed(2);

    /* ===== C·ªòNG SP ===== */
    const tongSP = gio.reduce((a,b)=>a+b,0);

    /* ===== USD / TH ===== */
    const usdth = tongSP * donGia;

    /* ===== HI·ªÜU SU·∫§T ===== */
    const hs = dmngay ? (tongSP / dmngay * 100) : 0;

    /* ===== USD NG√ÄY ƒê·∫†T 100% ===== */
    const usd100 = dmngay * donGia;

    /* ===== G√ÅN RA GIAO DI·ªÜN ===== */
    r.querySelector(".tong-sp").innerText = tongSP;
    r.querySelector(".usd-th").innerText = usdth.toFixed(2);
    r.querySelector(".hs").innerText = hs.toFixed(1) + "%";
    r.querySelector(".usd100").innerText = usd100.toFixed(2);

    /* ===== T·ªîNG USD THEO GI·ªú (FOOTER) ===== */
    gio.forEach((v,i)=>{
      tongUsdGio[i] += v * donGia;
    });

    /* ===== T·ªîNG USD NG√ÄY ===== */
    tongNgay += usdth;
  });

  /* ===== HI·ªÇN TH·ªä T·ªîNG USD T·ª™NG GI·ªú ===== */
  document.querySelectorAll(".tong-usd-gio").forEach((c,i)=>{
    c.innerText = tongUsdGio[i].toFixed(2);
  });

  /* ===== T·ªîNG USD TO√ÄN NG√ÄY ===== */
  const tongNgayEl = document.getElementById("tong-usd-ngay");
  if (tongNgayEl) tongNgayEl.innerText = tongNgay.toFixed(2);
}

document.addEventListener("input",calc);
</script>

</body>
</html>
