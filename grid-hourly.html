<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Nh·∫≠p nƒÉng su·∫•t theo gi·ªù</title>
<style>
body{font-family:Segoe UI;background:#f3f4f6;padding:20px}
table{border-collapse:collapse;width:100%;background:#fff}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
th{background:#2563eb;color:#fff}
input,select{width:100%;border:none;text-align:center}
.low{background:#fee2e2}
.mid{background:#fef9c3}
.high{background:#dcfce7}
tfoot td{font-weight:bold;background:#e5e7eb}
</style>
</head>
<body>

<h2>üìä Nh·∫≠p nƒÉng su·∫•t theo gi·ªù ‚Äì XN1</h2>

<table id="grid">
<thead>
<tr>
  <th>Gi·ªù</th>
  <th>M√£ h√†ng</th>
  <th>K·∫ø ho·∫°ch</th>
  <th>Th·ª±c t·∫ø</th>
  <th>% HS</th>
  <th>Nguy√™n nh√¢n</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr>
  <td colspan="3">T·ªîNG NG√ÄY</td>
  <td id="sumTT">0</td>
  <td id="avgHS">0%</td>
  <td></td>
</tr>
</tfoot>
</table>

<script>
const HOURS = [
  "07-08","08-09","09-10","10-11","12-13",
  "13-14","14-15","15-16","16-17"
];

const tbody = document.querySelector("#grid tbody");

HOURS.forEach(h=>{
  const tr=document.createElement("tr");
  tr.innerHTML=`
    <td>${h}</td>
    <td><input></td>
    <td><input type="number" class="kh"></td>
    <td><input type="number" class="tt"></td>
    <td class="hs">0%</td>
    <td>
      <select>
        <option value="">-</option>
        <option>M√°y h∆∞</option>
        <option>Thi·∫øu ph·ª• li·ªáu</option>
        <option>Thi·∫øu ng∆∞·ªùi</option>
        <option>L·ªói ch·∫•t l∆∞·ª£ng</option>
      </select>
    </td>
  `;
  tbody.appendChild(tr);
});

tbody.addEventListener("input",calc);

function calc(){
  let sumTT=0,sumHS=0,c=0;

  document.querySelectorAll("tbody tr").forEach(tr=>{
    const kh=+tr.querySelector(".kh").value;
    const tt=+tr.querySelector(".tt").value;
    const hsCell=tr.querySelector(".hs");

    if(kh>0 && tt>=0){
      const hs=Math.round(tt/kh*100);
      hsCell.innerText=hs+"%";
      hsCell.className="hs "+(hs<80?"low":hs<95?"mid":"high");
      sumTT+=tt; sumHS+=hs; c++;
    }
  });

  document.getElementById("sumTT").innerText=sumTT;
  document.getElementById("avgHS").innerText=c?Math.round(sumHS/c)+"%":"0%";
}
</script>

</body>
</html>
